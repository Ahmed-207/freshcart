<div class="user-dropdown-container relative md:mx-1">
    <button type="button" (click)="toggleDropdown($event)"
        class="flex cursor-pointer items-center justify-center size-8 rounded-full bg-green-500 hover:bg-green-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
        aria-label="User menu" aria-haspopup="true" [attr.aria-expanded]="isDropdownOpen">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
    </button>

    @if(isDropdownOpen){
    <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50 animate-fade-in"
        role="menu" aria-orientation="vertical">
        <!-- Profile Button -->
        <button type="button" (click)="navigateToProfile()"
            class="w-full flex items-center px-4 py-3 text-left text-black hover:bg-gray-200 transition-colors duration-150 border-b border-gray-200"
            role="menuitem">
            <!-- Profile Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-green-500" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
            <span class="text-sm font-medium">{{'Profile' | translate}}</span>
        </button>

        <!-- Wishlist Button -->
        <button type="button" (click)="navigateToWishlist()"
            class="w-full flex items-center px-4 py-3 text-left text-black hover:bg-gray-200 transition-colors duration-150 border-b border-gray-200"
            role="menuitem">
            <!-- Wishlist Icon (Heart) -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-green-500" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
            <span class="text-sm font-medium">{{'Wishlist'|translate}}</span>
        </button>

        <!-- Sign Out Button -->
        <button type="button" (click)="signOut()"
            class="w-full flex items-center px-4 py-3 text-left text-black hover:bg-gray-200 transition-colors duration-150"
            role="menuitem">
            <!-- Sign Out Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-green-500" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
            </svg>
            <span class="text-sm font-medium">{{'Sign Out'|translate}}</span>
        </button>
    </div>
    }
</div>